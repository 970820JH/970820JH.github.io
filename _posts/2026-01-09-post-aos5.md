---
title: "모바일(AOS)진단 5 - 단말 취약점 진단 (디바이스 로그 내 저장된 중요정보 확인)"
categories:
  - 모바일(AOS)
tags:
  - 모바일(AOS)
---

>   **디바이스 로그 관련 상세 내용 및 취약점** <br>

**디버그 로그 : 앱 동작을 추적하고 개발 단계에서 버그를 수정하는데 사용 (앱 실행중에 발생하는 이벤트, 상태, 변숫값 모니터링할 수 있는 도구)**<br>
<br>
application android:debuggable="true" -> 2020년 이후 거의없음
<br>

*** 앱이 로그정보를 남기는 방법**<br> 
1.android.util.Log 클래스<br>
<br>
import android.util.Log;<br>
<br>
Log.v("TAG", "Verbose 로그"); &nbsp;&nbsp;  // v - 가장 상세<br>
Log.d("TAG", "Debug 로그");   &nbsp;&nbsp;  // d - 디버깅용<br>
Log.i("TAG", "Info 로그");    &nbsp;&nbsp;  // i - 정보성<br>
Log.w("TAG", "Warning 로그"); &nbsp;&nbsp;  // w - 경고<br>
Log.e("TAG", "Error 로그");   &nbsp;&nbsp;  // e - 에러<br>
<br>
-> "TAG"	로그 출처를 식별하기 위한 이름(라벨)<br>
-> "Verbose 로그"	실제로 출력되는 로그 메시지 내용<br>
ex. Log.v("TAG", "Verbose 로그") &nbsp;&nbsp; -> &nbsp; V / TAG: Verbose로그 이런식으로 logcat남음<br>
<br>

```
* 로그캣 출력 형식<br>
Date / Time /          PID-TID            / Packagename / Priority /    Tag   / Message
날짜 / 시간 / 프로세스식별자,스레드식별자  /  패키지명    / 로그레벨 /    태그   /  메시지
ex. 25-12-14 / 20:42:58 / 9794-9794      / com.~~       /    I     / username: / jaeho820
```
<img src="/assets/images/icon/logcat.png"  style="display:block; margin:0 auto; width:90%; border:1px solid #000;"><br>

>   **보안대책** <br>

소스코드 내 디버그 로그(Log.d, Log.v 등)를 통해
인증정보 및 개인정보가 출력되지 않도록
관련 로그 구문을 제거하거나 민감정보 출력이 발생하지 않도록 수정한다.



<br>

```
*진단관련 명령어*
* adb logcat : 실시간 로그 확인
   ㄴ adb logcat --pid=12345 식으로 pid고정해놓고 보면 편함
   ㄴ adb logcat --pid [pid] | grep "원하는문자열"

* adb shell dumpsys window : 화면/UI 표시 상태

* adb shell dumpsys activity activity activities | findstr "패키지명" : 앱 로직 실행 상태(액티비티/태스크) 
   -> 지금 이순간 안드로이드 OS가 이 앱을 어떻게 실행,표시,관리하고 있는지 (지금 켜져있는 액티비티 알 수 있음)

* adb shell dumpsys package "패키지명" : 설치, 정적
   -> 안드로이드 시스템이 해당 앱을 어떻게 인식,관리하고 있는지

```

<br>

cf. adb shell am start -n 패키지명/액티비티명 하면 액티비티 강제 실행가능



