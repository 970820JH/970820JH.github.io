---
title: "모바일(AOS)진단 1 - 안드로이드 이론"
categories:
  - 모바일(AOS)
tags:
  - 모바일(AOS)
---


>   모바일 진단에 앞선 이론

Mobile App Hacking   <->   Mobile Hacking(모바일 단말기를 해킹, 즉 OS를 해킹)
 → 모바일 진단은 모바일에서 실행하는 앱의 취약점을 찾아 악용하는 것으로, 단말기를 해킹하는 Mobile Hacking과는 다른 개념.

Mobile App Hacking 개요
모바일 앱 / 모바일 앱 서버(API서버) → 취약점을 두 관점 모두생각 
ㄴ모바일 앱 공격 : 모바일 앱의 흐름(로직)을 조작해서 악용 / 루팅,탈옥 환경에서 앱 동작 우회 가능

ㄴ모바일 앱 서버 공격(앱 유형별)
Web App : 웹사이트하나만들어두고 스마트폰 그대로이식
Hybrid APP - 필요한 데이터를 웹통신(HTTP) ->웹프록시를 통해 이뤄짐
Natice APP - HTTP통신이아닌 TCP통신 -> TCP프록시를 이용or 앱을 분석해서 함수통해 주고받는 확인





안드로이드 앱은 누가 실행하는 걸까? Java기반으로 개발되는 안드로이드 앱
JVM : Java프로그램 실행 ->Bytecode로 변환 -> JVM에서 실행 
Dalvik VM : 라이선스 문제 -> Bytecode 실행 전 네이티브코드로
ART(최근) : OAT File실행 -> 앱을 설치할 때 완전 네이티브 코드로 변환(AOT컴파일) 

DEX(Dalvik Executable) - Android 실행파일
Smali - Dalvik Code를 위한 어셈블리언어

Android APP위변조 방지 - 앱 개발자가 자신을 인증하기 위해 개발자 자신의 코드서명 인증서로 서명하는것 

Android APK구조
Application
	ㄴassets : 앱실행에 필요한 자원(동영상 같은 큰파일) 관리 폴더
	ㄴres: 앱 실행에 필요한 자원(아이콘 같은 작은 파일등) 관리 폴더
	ㄴMETA-INF : 인증 서명(Sign)과 관련한 정보가 담겨있는 폴더
	ㄴlibs : 라이브러리 파일(*.so)이 들어있는 폴더
	ㄴ** AndroidManifest.xml : Android정의 파일로 Android App정보(접근권한, 버전)가 들어있는 폴더
	ㄴresources.acsc : 파일 리소스의 배열 / res정보 들어있는 파일
	ㄴclass.dex : android 가상머신 달빅(dalvik)이 인식할 수 있도록 *.class파일을 바이트 코드로 변환시킨 소스파일

AndroidManifest.xml (APP에 대한 정보)
ㄴ고유 패키지 이름(ID)
ㄴActivity화면 (Android APP을 실행하면 볼 수 있는 화면 / 사용자와 상호작용(클릭,드래그등)을 하는 UI제공/ 하나의 클래스) 즉, 하나의 화면 
		Activithy생명주기(Life Cycle) : onCreate() ->onStart() ->onResume() ->보여지는 상태 ->다른 액티비티가 보여짐->onPause() ->(액티비티가 완전히 보이지 않음)onStop()
ㄴ권한 정의
ㄴ외부 라이브러리 정보
